---
import BaseLayout from "../layouts/BaseLayout.astro";
import BlogPost from "../components/BlogPost.astro";
const allPosts = (await Astro.glob("../pages/posts/*.mdx")).sort(
  (a, b) => new Date(b.frontmatter.pubDate).valueOf() - new Date(a.frontmatter.pubDate).valueOf()
);
const tags = [...new Set(allPosts.map((post) => post.frontmatter.tags).flat())];

const pageTitle = "Blog";
const pageDescription = "This is where I will post about my journey mastering UX design.";
---

<BaseLayout pageTitle={pageTitle} description={pageDescription}>
  <div class="container">
    <h1>{pageTitle}</h1>
    <p>{pageDescription}</p>
    <div class="tags">
      {
        tags.map((tag) => (
          <p class="tag">
            <a href={`/tags/${tag}`}>{tag}</a>
          </p>
        ))
      }
    </div>
    <ul class="blog-list">
      {
        allPosts.map((post) => (
          <BlogPost
            url={post.url}
            title={post.frontmatter.title}
            description={post.frontmatter.description}
            pubDate={post.frontmatter.pubDate.slice(0, 10)}
          />
        ))
      }
    </ul>
  </div>
</BaseLayout>

<style>
  h1 {
    margin-bottom: 0.2em;
  }
  .tags {
    display: flex;
    flex-wrap: wrap;
    gap: 0.5em;
    margin: 1em auto;
  }
  .tag {
    border: solid 1px #e2e8f0;
    border-radius: 0.5em;
    padding: 0.25em 0.75em;
    background-color: #f8fafc;
  }
</style>
